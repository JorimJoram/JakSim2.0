DROP TABLE TIMETABLE;

CREATE TABLE TIMETABLE(
    T_IDX INT(8) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    USER_ID VARCHAR(30) NOT NULL,
    T_DATE DATE NOT NULL,
    T_START_T TIME NOT NULL,
    T_END_T TIME NOT NULL,
    T_PEOPLE INT(3) NOT NULL DEFAULT '1',
    T_TYPE INT(1) NOT NULL DEFAULT '0',
    FOREIGN KEY (USER_ID) REFERENCES USER_INFO(USER_ID) ON DELETE CASCADE
);

COMMIT;

INSERT INTO TIMETABLE
VALUES(NULL, 'test', '2023/05/23', '11:00', '12:00', '3', '0');
INSERT INTO TIMETABLE
VALUES(NULL, 'test', '2023/08/15', '20:00', '22:00', '3', '0');
INSERT INTO TIMETABLE
VALUES(NULL, 'test', '2023/08/15', '21:00', '12:00', '3', '0');
INSERT INTO TIMETABLE
VALUES(NULL, 'test', '2023/09/19', '11:00', '12:00', '3', '0');

INSERT INTO TIMETABLE
VALUES(NULL, 'wkdgyfla97', '2023/05/25', '11:00', '12:00', '1', '1');
INSERT INTO TIMETABLE
VALUES(NULL, 'test96', '2023/05/23', '09:00', '10:00', '3', '0');
INSERT INTO TIMETABLE
VALUES(NULL, 'test96', '2023/05/25', '10:00', '11:00', '1', '1');
INSERT INTO TIMETABLE
VALUES(NULL, 'test96', sysdate(), '11:00', '12:00', '2', '1');

select T_IDX, USER_ID, T_DATE, T_START_T, T_END_T, T_PEOPLE, T_TYPE, (T_DATE - CURRENT_DATE) AS DIFFDATE, (T_START_T - CURRENT_TIME) AS DIFFTIME,
from timetable
where (t_date - current_date) >=0 and user_id = 'test'
order by DIFFDATE asc, DIFFTIME asc;