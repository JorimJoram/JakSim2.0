{{>layout/header}}
<link rel="stylesheet" href="/css/trainer/trainerRegister.css">
<link rel="stylesheet" href="/css/trainer/trainerSearch.css">
<body>
<style>
        #preview-image {
            max-width: 500px;
            max-height: 500px;
            display: none;
        }

        #preview-image2 {
            max-width: 500px;
            max-height: 500px;
            display: none;
        }
    </style>
<script>
    function previewImage(event) {
        var input = event.target;
        var reader = new FileReader();

        reader.onload = function(){
            var preview = document.getElementById('preview-image');
            preview.src = reader.result;
            preview.style.display = 'block';
        };

        reader.readAsDataURL(input.files[0]);
    }

    function previewImage2(event) {
        var input = event.target;
        var previewContainer = document.getElementById('image-preview-container');
        previewContainer.innerHTML = ''; // 기존의 미리보기 이미지를 모두 지웁니다.

        for (var i = 0; i < input.files.length; i++) {
            var reader = new FileReader();

            reader.onload = function (e) {
                var previewImage = document.createElement('img');
                previewImage.src = e.target.result;
                previewImage.style.maxWidth = '500px';
                previewImage.style.maxHeight = '500px';
                previewContainer.appendChild(previewImage);
            };

            reader.readAsDataURL(input.files[i]);
        }
    }
</script>
{{>layout/navi}}
<div id="trainer_create_container">
    <span class="jaksim_title_font" style="font-size: 20px; color: black;">트레이너 등록하기</span>
    <form action="/trainerRegister" method="POST" enctype="multipart/form-data" onsubmit="return confirm('트레이너 등록을 하시겠습니까?');">
        <div class="input_container">
            <span class="input_span jaksim_font">인스타 링크</span>
            <input class="input_input jaksim_font" type="text" name="insta">
        </div>
        <div class="input_container">
                <span class="input_span jaksim_font">자기소개</span>
            <textarea name="introduce" class="jaksim_font" id="trainer_create_introduce" cols="30" rows="10" required></textarea>
        </div>
        <div class="input_container">
            <span class="input_span jaksim_font">소속 헬스장</span>
            <input class="input_input jaksim_font" type="text" name="gym" required>
        </div>
        <br>
        <span style="font-weight:bold">전문분야</span>
            <span style="font-size: 12px;">2개를 선택해주세요</span><br>
        <select name="expert1" class="input_select jaksim_font" style="margin-left: 0px;">
            <option value="0" selected>바디프로필</option>
            <option value="1">파워리프팅</option>
            <option value="2">다이어트</option>
            <option value="3">재활운동</option>
            <option value="4">자세교정</option>
            <option value="5">컨디셔닝</option>
        </select>
        <select name="expert2" class="input_select jaksim_font" style="margin-left: 10px;">
            <option value="0">바디프로필</option>
            <option value="1" selected>파워리프팅</option>
            <option value="2">다이어트</option>
            <option value="3">재활운동</option>
            <option value="4">자세교정</option>
            <option value="5">컨디셔닝</option>
        </select>

        <div class="input_container">
            <span class="input_span jaksim_font">자격증 추가</span>
            <input class="input_input jaksim_font" type="text" name="certNameInput" id="certName">
            <button type="button" id="add-cert" class="btn btn-outline-secondary jaksim_font">자격증 추가</button><br/>
            <span style="font-weight:bold" class="jaksim_font">자격증 이미지 등록</span><br>
            <span style="font-size: 12px;">자격증 이미지는 1개만 등록 가능합니다.</span><br>
            <input accept="image/*" type="file" name="certImage1" class="jaksim_font" required onchange="previewImage(event)" />
            <img id="preview-image" src="" alt="미리보기">
            <div id="create_cert_div"></div>
        </div>

        <div class="input_container">
            <br>
            <span class="input_span jaksim_font">경력사항</span>
            <input class="input_input jaksim_font" type="text" name="careerContentInput" id="careerContent">
            <button type="button" id="add-career" class="btn btn-outline-secondary jaksim_font">경력사항 추가</button>
            <div id="create_career_div"></div>
        </div>
        <div class="input_container">
            <div>
                <input type="radio" name="ptType1" value="0" id="ptType" class="create_toggle">
                <label for="personal" class="jaksim_font">개인</label>
                <input type="radio" name="ptType1" value="1" id="ptType" class="create_toggle">
                <label for="organ" class="jaksim_font">단체</label>
            </div>
            <span class="input_span jaksim_font">횟수</span>
            <input class="input_input jaksim_font" type="number" name="ptTimes1" id="ptTimes" placeholder="횟수를 입력해주세요" style="margin-bottom:5px;">
            <br>
            <span class="input_span jaksim_font">PT 제목</span>
            <input class="input_input jaksim_font" type="text" name="ptTitle1" id="ptTitle" placeholder="제목을 입력하세요" style="margin-bottom:5px;">
            <br>
            <span class="input_span jaksim_font">가격</span>
            <input class="input_input jaksim_font" type="number" name="ptPrice1" id="ptPrice" placeholder="금액을 입력하세요" style="margin-bottom:5px;">
            <br>
            <span class="input_span jaksim_font">유효기간</span>
            <input class="input_input jaksim_font" type="number" name="ptPeriod1" id="ptPeriod" placeholder="유효기간을 입력하세요(일단위)" style="margin-bottom:5px;">
            <button type="button" id="add-pt" class="btn btn-outline-secondary jaksim_font">등록</button>
            
            <div id="create_pt_div"></div>
        </div>

        <div class="input_class">
            <span style="font-weight:bold" class="jaksim_font">이미지 등록</span><br>
            <span style="font-size: 12px;">첫번째 이미지는 프로필 이미지로 사용됩니다</span><br>
            <input accept="image/*" type="file" name="imagePath1" class="jaksim_font" required onchange="previewImage2(event)" multiple/>
            <div id="image-preview-container"></div>
        </div>
        <br>
        <input type="submit" value="트레이너 등록" style="padding-left: 10px; padding-right: 10px;padding-bottom: 6px;padding-top: 6px;" class="jaksim_btn">
    </form>
</div>

{{>layout/footer}}
<script>
    document.getElementById('add-cert').onclick = function(){
    var certInput = document.getElementById('certName');
    var create_cert_div = document.getElementById('create_cert_div');
    var cert_span = document.createElement('input');

    if(certInput.value){
        cert_span.value = certInput.value; 
        cert_span.setAttribute('class', 'btn btn-outline-primary jaksim_font');
        cert_span.setAttribute('name', 'certName');
        cert_span.style.margin = '3px';

        create_cert_div.appendChild(cert_span);
        certInput.value = '';
    }
}


        document.getElementById('add-career').onclick = function(){
            var careerInput = document.getElementById('careerContent');
            var create_career_div = document.getElementById('create_career_div');
            var career_span = document.createElement('input');

            if(careerInput.value){
                //console.log(careerInput);
                career_span.value = careerInput.value;
                career_span.setAttribute('class', 'btn btn-outline-primary jaksim_font');
                career_span.setAttribute('name', 'careerContent');
                career_span.style.margin = '3px';

                create_career_div.appendChild(career_span);
                careerInput.value = '';
            }
        }
        
    document.getElementById('add-pt').onclick = function(){
    var type = document.querySelector('input[id="ptType"]:checked');
    var times = document.getElementById('ptTimes');
    var title = document.getElementById('ptTitle');
    var price = document.getElementById('ptPrice');
    var period = document.getElementById('ptPeriod');

    console.log(type);

    var create_pt_div = document.getElementById('create_pt_div');

    var pt_input_type = document.createElement('input');
    var pt_input_times = document.createElement('input');
    var pt_input_title = document.createElement('input');
    var pt_input_price = document.createElement('input');
    var pt_input_period = document.createElement('input');

    let displayText = '';

    if (type.value && times.value && title.value && price.value && period.value) {
        if (parseInt(type.value) === 0)
            displayText += '개인';
        else
            displayText += '단체';

        pt_input_type.value = type.value;
        pt_input_type.setAttribute('class', 'btn btn-outline-primary jaksim_font');
        pt_input_type.setAttribute('name', 'ptType');
        pt_input_type.setAttribute('type', 'number');
        pt_input_type.setAttribute('readonly', 'readonly');
        pt_input_type.style.margin = '3px';


        pt_input_times.value = times.value;
        pt_input_times.setAttribute('class', 'btn btn-outline-primary jaksim_font');
        pt_input_times.setAttribute('name', 'ptTimes');
        pt_input_times.setAttribute('type', 'number');
        pt_input_times.setAttribute('readonly', 'readonly');
        pt_input_times.style.margin = '3px';

        pt_input_title.value = title.value;
        pt_input_title.setAttribute('class', 'btn btn-outline-primary jaksim_font');
        pt_input_title.setAttribute('name', 'ptTitle');
        pt_input_title.style.margin = '3px';

        pt_input_price.value = price.value;
        pt_input_price.setAttribute('class', 'btn btn-outline-primary jaksim_font');
        pt_input_price.setAttribute('name', 'ptPrice');
        pt_input_price.setAttribute('type', 'number');
        pt_input_price.setAttribute('readonly', 'readonly');
        pt_input_price.style.margin = '3px';

        pt_input_period.value = period.value;
        pt_input_period.setAttribute('class', 'btn btn-outline-primary jaksim_font');
        pt_input_period.setAttribute('name', 'ptPeriod');
        pt_input_period.setAttribute('type', 'number');
        pt_input_period.setAttribute('readonly', 'readonly');
        pt_input_period.style.margin = '3px';


        create_pt_div.appendChild(pt_input_type);
        create_pt_div.appendChild(pt_input_times);
        create_pt_div.appendChild(pt_input_title);
        create_pt_div.appendChild(pt_input_price);
        create_pt_div.appendChild(pt_input_period);

        console.log(create_pt_div);
        times.value = '';
        title.value = '';
        price.value = '';
        type.value = '';
        period.value = '';

        
    }
    
}

</script>
